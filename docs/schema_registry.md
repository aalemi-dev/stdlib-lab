<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# schema\_registry

```go
import "github.com/aalemi-dev/stdlib-lab/schema_registry"
```

Package schema\_registry provides integration with Confluent Schema Registry.

This package enables schema management, validation, and evolution for Apache Kafka messages and other streaming data
platforms. It supports multiple serialization formats including Avro, Protobuf, and JSON Schema.

### Architecture

This package follows the "accept interfaces, return structs" design pattern:

- Registry interface: Defines the contract for schema registry operations
- Client struct: Concrete implementation of the Registry interface
- NewClient constructor: Returns \*Client \(concrete type\)
- FX module: Provides both \*Client and Registry interface for dependency injection

Core Features:

- HTTP client for Confluent Schema Registry
- Schema registration and retrieval with caching
- Compatibility checking for schema evolution
- Confluent wire format encoding/decoding
- Serializers for Avro, Protobuf, and JSON Schema
- Generic wrapper for custom serializers

### Direct Usage \\\(Without FX\\\)

For simple applications or tests, create a client directly:

```
import "github.com/aalemi-dev/stdlib-lab/schema_registry"

// Create schema registry client (returns concrete *Client)
client, err := schema_registry.NewClient(schema_registry.Config{
    URL:      "http://localhost:8081",
    Username: "user",     // Optional
    Password: "password", // Optional
    Timeout:  10 * time.Second,
})
if err != nil {
    log.Fatal(err)
}

// Register a schema
avroSchema := `{
    "type": "record",
    "name": "User",
    "fields": [
        {"name": "name", "type": "string"},
        {"name": "age", "type": "int"}
    ]
}`

schemaID, err := client.RegisterSchema("users-value", avroSchema, "AVRO")
```

### FX Module Integration

For production applications using Uber's fx, use the FXModule which provides both the concrete type and interface:

```
import (
    "go.uber.org/fx"
    "github.com/aalemi-dev/stdlib-lab/schema_registry"
)

app := fx.New(
    schema_registry.FXModule, // Provides *Client and Registry interface
    fx.Provide(
        func() schema_registry.Config {
            return schema_registry.Config{
                URL:      os.Getenv("SCHEMA_REGISTRY_URL"),
                Username: os.Getenv("SCHEMA_REGISTRY_USER"),
                Password: os.Getenv("SCHEMA_REGISTRY_PASSWORD"),
                Timeout:  30 * time.Second,
            }
        },
    ),
    fx.Invoke(func(client *schema_registry.Client) {
        // Use concrete type directly
        schemaID, _ := client.RegisterSchema("subject", schema, "AVRO")
    }),
)
```

### Observability \\\(Observer Hook\\\)

Schema Registry supports optional observability through the Observer interface from the observability package. This
allows external systems to track schema operations without coupling the package to specific metrics/tracing
implementations.

Using WithObserver \(non\-FX usage\):

```
client, err := schema_registry.NewClient(config)
if err != nil {
    return err
}
client = client.WithObserver(myObserver).WithLogger(myLogger)
```

Using FX \(automatic injection\):

```
app := fx.New(
    schema_registry.FXModule,
    logger.FXModule,  // Optional: provides logger
    fx.Provide(
        func() schema_registry.Config { return loadConfig() },
        func() observability.Observer { return myObserver },  // Optional
    ),
)
```

The observer receives events for all schema operations:

- Component: "schema\_registry"
- Operations: "get\_schema\_by\_id", "get\_latest\_schema", "register\_schema", "check\_compatibility"
- Resource: subject name \(or "registry" for ID lookups\)
- SubResource: schema ID or version
- Duration: operation duration
- Error: any error that occurred
- Metadata: operation\-specific details \(e.g., cache\_hit, schema\_type, schema\_id, is\_compatible\)

### Type Aliases in Consumer Code

To simplify your code and make it registry\-agnostic, use type aliases:

```
package myapp

import stdRegistry "github.com/aalemi-dev/stdlib-lab/schema_registry"

// Use type alias to reference std's interface
type SchemaRegistry = stdRegistry.Registry

// Now use SchemaRegistry throughout your codebase
func MyFunction(registry SchemaRegistry) {
    registry.GetSchemaByID(schemaID)
}
```

This eliminates the need for adapters and allows you to switch implementations by only changing the alias definition.

### Schema Operations

```
import "github.com/linkedin/goavro/v2"

// Create Avro codec
codec, err := goavro.NewCodec(avroSchema)
if err != nil {
    log.Fatal(err)
}

// Create Avro serializer
serializer, err := schema_registry.NewAvroSerializer(
    schema_registry.AvroSerializerConfig{
        Registry: client,
        Subject:  "users-value",
        Schema:   avroSchema,
        MarshalFunc: func(data interface{}) ([]byte, error) {
            return codec.BinaryFromNative(nil, data)
        },
    },
)

// Serialize data
user := map[string]interface{}{
    "name": "John Doe",
    "age":  30,
}
encoded, err := serializer.Serialize(user)
// encoded contains: [magic_byte][schema_id][avro_payload]

// Create Avro deserializer
deserializer, err := schema_registry.NewAvroDeserializer(
    schema_registry.AvroDeserializerConfig{
        Registry: client,
        UnmarshalFunc: func(data []byte, target interface{}) error {
            native, _, err := codec.NativeFromBinary(data)
            if err != nil {
                return err
            }
            // Handle conversion to target type
            return nil
        },
    },
)

// Deserialize data
var result map[string]interface{}
err = deserializer.Deserialize(encoded, &result)
```

### Using with Protobuf

```
import "google.golang.org/protobuf/proto"

// Create Protobuf serializer
serializer, err := schema_registry.NewProtobufSerializer(
    schema_registry.ProtobufSerializerConfig{
        Registry:    client,
        Subject:     "users-value",
        Schema:      protoSchema, // .proto file content as string
        MarshalFunc: proto.Marshal,
    },
)

// Serialize protobuf message
protoMsg := &pb.User{Name: "Jane", Age: 25}
encoded, err := serializer.Serialize(protoMsg)

// Create Protobuf deserializer
deserializer, err := schema_registry.NewProtobufDeserializer(
    schema_registry.ProtobufDeserializerConfig{
        Registry:      client,
        UnmarshalFunc: proto.Unmarshal,
    },
)

// Deserialize
var user pb.User
err = deserializer.Deserialize(encoded, &user)
```

### Using with JSON Schema

```
// Create JSON serializer
serializer, err := schema_registry.NewJSONSerializer(
    schema_registry.JSONSerializerConfig{
        Registry: client,
        Subject:  "users-value",
        Schema: `{
            "$schema": "http://json-schema.org/draft-07/schema#",
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "age": {"type": "integer"}
            }
        }`,
    },
)

// Serialize JSON
user := struct {
    Name string `json:"name"`
    Age  int    `json:"age"`
}{Name: "Alice", Age: 28}
encoded, err := serializer.Serialize(user)

// Deserialize
deserializer, err := schema_registry.NewJSONDeserializer(
    schema_registry.JSONDeserializerConfig{
        Registry: client,
    },
)
var result struct {
    Name string `json:"name"`
    Age  int    `json:"age"`
}
err = deserializer.Deserialize(encoded, &result)
```

### Wire Format

All serializers produce messages in Confluent wire format:

```
[magic_byte (1 byte)] [schema_id (4 bytes, big-endian)] [payload]
```

The magic byte is always 0x0, followed by the schema ID, then the serialized payload. This format is compatible with all
Confluent tools.

### Schema Caching

The client automatically caches schemas by ID and subject to minimize network calls to the Schema Registry. Caches are
thread\-safe and maintained in\-memory for the lifetime of the client.

For more information, see the SCHEMA\_REGISTRY.md documentation file.

## Index

- [Variables](<#variables>)
- [func DecodeSchemaID\(data \[\]byte\) \(int, \[\]byte, error\)](<#DecodeSchemaID>)
- [func EncodeSchemaID\(schemaID int\) \[\]byte](<#EncodeSchemaID>)
- [func RegisterSchemaRegistryLifecycle\(params SchemaRegistryLifecycleParams\)](<#RegisterSchemaRegistryLifecycle>)
- [type AvroDeserializer](<#AvroDeserializer>)
    - [func NewAvroDeserializer\(config AvroDeserializerConfig\) \(\*AvroDeserializer, error\)](<#NewAvroDeserializer>)
- [type AvroDeserializerConfig](<#AvroDeserializerConfig>)
- [type AvroSerializer](<#AvroSerializer>)
    - [func NewAvroSerializer\(config AvroSerializerConfig\) \(\*AvroSerializer, error\)](<#NewAvroSerializer>)
- [type AvroSerializerConfig](<#AvroSerializerConfig>)
- [type Client](<#Client>)
    - [func NewClient\(config Config\) \(\*Client, error\)](<#NewClient>)
    - [func NewClientWithDI\(params SchemaRegistryParams\) \(\*Client, error\)](<#NewClientWithDI>)
    - [func \(c \*Client\) CheckCompatibility\(subject, schema, schemaType string\) \(bool, error\)](<#Client.CheckCompatibility>)
    - [func \(c \*Client\) GetLatestSchema\(subject string\) \(\*Metadata, error\)](<#Client.GetLatestSchema>)
    - [func \(c \*Client\) GetSchemaByID\(id int\) \(string, error\)](<#Client.GetSchemaByID>)
    - [func \(c \*Client\) RegisterSchema\(subject, schema, schemaType string\) \(int, error\)](<#Client.RegisterSchema>)
    - [func \(c \*Client\) WithLogger\(logger Logger\) \*Client](<#Client.WithLogger>)
    - [func \(c \*Client\) WithObserver\(observer observability.Observer\) \*Client](<#Client.WithObserver>)
- [type Config](<#Config>)
- [type Deserializer](<#Deserializer>)
- [type JSONDeserializer](<#JSONDeserializer>)
    - [func NewJSONDeserializer\(config JSONDeserializerConfig\) \(\*JSONDeserializer, error\)](<#NewJSONDeserializer>)
- [type JSONDeserializerConfig](<#JSONDeserializerConfig>)
- [type JSONSerializer](<#JSONSerializer>)
    - [func NewJSONSerializer\(config JSONSerializerConfig\) \(\*JSONSerializer, error\)](<#NewJSONSerializer>)
- [type JSONSerializerConfig](<#JSONSerializerConfig>)
- [type Logger](<#Logger>)
- [type Metadata](<#Metadata>)
- [type ProtobufDeserializer](<#ProtobufDeserializer>)
    - [func NewProtobufDeserializer\(config ProtobufDeserializerConfig\) \(\*ProtobufDeserializer, error\)](<#NewProtobufDeserializer>)
- [type ProtobufDeserializerConfig](<#ProtobufDeserializerConfig>)
- [type ProtobufSerializer](<#ProtobufSerializer>)
    - [func NewProtobufSerializer\(config ProtobufSerializerConfig\) \(\*ProtobufSerializer, error\)](<#NewProtobufSerializer>)
- [type ProtobufSerializerConfig](<#ProtobufSerializerConfig>)
- [type Registry](<#Registry>)
- [type SchemaRegistryLifecycleParams](<#SchemaRegistryLifecycleParams>)
- [type SchemaRegistryParams](<#SchemaRegistryParams>)
- [type Serializer](<#Serializer>)
- [type WrapperDeserializer](<#WrapperDeserializer>)
    - [func NewWrapperDeserializer\(config WrapperDeserializerConfig\) \(\*WrapperDeserializer, error\)](<#NewWrapperDeserializer>)
    - [func \(d \*WrapperDeserializer\) Deserialize\(data \[\]byte, target interface\{\}\) error](<#WrapperDeserializer.Deserialize>)
- [type WrapperDeserializerConfig](<#WrapperDeserializerConfig>)
- [type WrapperSerializer](<#WrapperSerializer>)
    - [func NewWrapperSerializer\(config WrapperSerializerConfig\) \(\*WrapperSerializer, error\)](<#NewWrapperSerializer>)
    - [func \(s \*WrapperSerializer\) Serialize\(data interface\{\}\) \(\[\]byte, error\)](<#WrapperSerializer.Serialize>)
- [type WrapperSerializerConfig](<#WrapperSerializerConfig>)

## Variables

<a name="FXModule"></a>FXModule is an fx.Module that provides and configures the Schema Registry client. This module
registers the Schema Registry client with the Fx dependency injection framework, making it available to other components
in the application.

The module provides: 1. \*Client \(concrete type\) for direct use 2. Registry interface for dependency injection 3.
Lifecycle management for proper initialization

Usage:

```
app := fx.New(
    schema_registry.FXModule,
    fx.Provide(
        func() schema_registry.Config {
            return schema_registry.Config{
                URL:      "http://localhost:8081",
                Username: "user",
                Password: "pass",
            }
        },
    ),
)
```

```go
var FXModule = fx.Module("schema_registry",
    fx.Provide(
        NewClientWithDI,

        fx.Annotate(
            func(c *Client) Registry { return c },
            fx.As(new(Registry)),
        ),
    ),
    fx.Invoke(RegisterSchemaRegistryLifecycle),
)
```

<a name="DecodeSchemaID"></a>

## func [DecodeSchemaID](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L424>)

```go
func DecodeSchemaID(data []byte) (int, []byte, error)
```

DecodeSchemaID decodes a schema ID from the Confluent wire format Returns the schema ID and the remaining payload
\(after the 5\-byte header\)

<a name="EncodeSchemaID"></a>

## func [EncodeSchemaID](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L415>)

```go
func EncodeSchemaID(schemaID int) []byte
```

EncodeSchemaID encodes a schema ID in the Confluent wire format Format: \[magic\_byte\]\[schema\_id\] \- magic\_byte:
0x0 \(1 byte\) \- schema\_id: 4 bytes \(big\-endian\)

<a name="RegisterSchemaRegistryLifecycle"></a>

## func [RegisterSchemaRegistryLifecycle](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/fx_module.go#L123>)

```go
func RegisterSchemaRegistryLifecycle(params SchemaRegistryLifecycleParams)
```

RegisterSchemaRegistryLifecycle registers the Schema Registry client with the fx lifecycle system. This function sets up
proper initialization and graceful shutdown of the Schema Registry client.

Parameters:

- params: The lifecycle parameters containing the Schema Registry client

The function:

1. On application start: Logs that the registry client is ready
2. On application stop: Currently no cleanup needed \(HTTP client is stateless\)

This ensures that the Schema Registry client remains available throughout the application's lifetime and any future
cleanup logic can be added here.

<a name="AvroDeserializer"></a>

## type [AvroDeserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/avro.go#L57-L59>)

AvroDeserializer is a convenience wrapper for Avro with schema registry

```go
type AvroDeserializer struct {
    *WrapperDeserializer
}
```

<a name="NewAvroDeserializer"></a>

### func [NewAvroDeserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/avro.go#L68>)

```go
func NewAvroDeserializer(config AvroDeserializerConfig) (*AvroDeserializer, error)
```

NewAvroDeserializer creates an Avro deserializer with schema registry support

<a name="AvroDeserializerConfig"></a>

## type [AvroDeserializerConfig](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/avro.go#L62-L65>)

AvroDeserializerConfig holds configuration for Avro deserializer

```go
type AvroDeserializerConfig struct {
    Registry      Registry
    UnmarshalFunc func([]byte, interface{}) error // Avro decoding function
}
```

<a name="AvroSerializer"></a>

## type [AvroSerializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/avro.go#L8-L10>)

AvroSerializer is a convenience wrapper for Avro with schema registry

```go
type AvroSerializer struct {
    *WrapperSerializer
}
```

<a name="NewAvroSerializer"></a>

### func [NewAvroSerializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/avro.go#L21>)

```go
func NewAvroSerializer(config AvroSerializerConfig) (*AvroSerializer, error)
```

NewAvroSerializer creates an Avro serializer with schema registry support

<a name="AvroSerializerConfig"></a>

## type [AvroSerializerConfig](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/avro.go#L13-L18>)

AvroSerializerConfig holds configuration for Avro serializer

```go
type AvroSerializerConfig struct {
    Registry    Registry
    Subject     string
    Schema      string
    MarshalFunc func(interface{}) ([]byte, error) // Avro encoding function
}
```

<a name="Client"></a>

## type [Client](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L47-L68>)

Client is the default implementation of Registry that communicates with Confluent Schema Registry over HTTP.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="NewClient"></a>

### func [NewClient](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L100>)

```go
func NewClient(config Config) (*Client, error)
```

NewClient creates a new schema registry client Returns the concrete \*Client type.

<a name="NewClientWithDI"></a>

### func [NewClientWithDI](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/fx_module.go#L84>)

```go
func NewClientWithDI(params SchemaRegistryParams) (*Client, error)
```

NewClientWithDI creates a new Schema Registry client using dependency injection. This function is designed to be used
with Uber's fx dependency injection framework where dependencies are automatically provided via the SchemaRegistryParams
struct.

Returns the concrete \*Client type.

Parameters:

- params: A SchemaRegistryParams struct that contains the Config instance required to initialize the Schema Registry
  client. This struct embeds fx.In to enable automatic injection of these dependencies.

Returns:

- \*Client: A fully initialized Schema Registry client ready for use.

Example usage with fx:

```
app := fx.New(
    schema_registry.FXModule,
    fx.Provide(
        func() schema_registry.Config {
            return schema_registry.Config{
                URL:      os.Getenv("SCHEMA_REGISTRY_URL"),
                Username: os.Getenv("SCHEMA_REGISTRY_USER"),
                Password: os.Getenv("SCHEMA_REGISTRY_PASSWORD"),
                Timeout:  30 * time.Second,
            }
        },
    ),
)
```

<a name="Client.CheckCompatibility"></a>

### func \(\*Client\) [CheckCompatibility](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L341>)

```go
func (c *Client) CheckCompatibility(subject, schema, schemaType string) (bool, error)
```

CheckCompatibility checks if a schema is compatible with the existing schema for a subject

<a name="Client.GetLatestSchema"></a>

### func \(\*Client\) [GetLatestSchema](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L193>)

```go
func (c *Client) GetLatestSchema(subject string) (*Metadata, error)
```

GetLatestSchema retrieves the latest version of a schema for a subject

<a name="Client.GetSchemaByID"></a>

### func \(\*Client\) [GetSchemaByID](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L122>)

```go
func (c *Client) GetSchemaByID(id int) (string, error)
```

GetSchemaByID retrieves a schema from the registry by its ID

<a name="Client.RegisterSchema"></a>

### func \(\*Client\) [RegisterSchema](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L246>)

```go
func (c *Client) RegisterSchema(subject, schema, schemaType string) (int, error)
```

RegisterSchema registers a new schema with the schema registry

<a name="Client.WithLogger"></a>

### func \(\*Client\) [WithLogger](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L456>)

```go
func (c *Client) WithLogger(logger Logger) *Client
```

WithLogger sets the logger for this client and returns the client for method chaining. The logger is used for structured
logging of client operations and errors.

Example:

```
client := client.WithObserver(myObserver).WithLogger(myLogger)
```

<a name="Client.WithObserver"></a>

### func \(\*Client\) [WithObserver](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L445>)

```go
func (c *Client) WithObserver(observer observability.Observer) *Client
```

WithObserver sets the observer for this client and returns the client for method chaining. The observer receives events
about schema registry operations \(e.g., register, get, check compatibility\).

Example:

```
client := client.WithObserver(myObserver).WithLogger(myLogger)
```

<a name="Config"></a>

## type [Config](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L71-L83>)

Config holds configuration for schema registry client

```go
type Config struct {
    // URL is the schema registry endpoint (e.g., "http://localhost:8081")
    URL string

    // Username for basic auth (optional)
    Username string

    // Password for basic auth (optional)
    Password string

    // Timeout for HTTP requests
    Timeout time.Duration
}
```

<a name="Deserializer"></a>

## type [Deserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L13-L15>)

Deserializer is the interface for decoding data

```go
type Deserializer interface {
    Deserialize(data []byte, target interface{}) error
}
```

<a name="JSONDeserializer"></a>

## type [JSONDeserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/json.go#L53-L55>)

JSONDeserializer is a convenience wrapper for JSON Schema with schema registry

```go
type JSONDeserializer struct {
    *WrapperDeserializer
}
```

<a name="NewJSONDeserializer"></a>

### func [NewJSONDeserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/json.go#L63>)

```go
func NewJSONDeserializer(config JSONDeserializerConfig) (*JSONDeserializer, error)
```

NewJSONDeserializer creates a JSON deserializer with schema registry support

<a name="JSONDeserializerConfig"></a>

## type [JSONDeserializerConfig](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/json.go#L58-L60>)

JSONDeserializerConfig holds configuration for JSON deserializer

```go
type JSONDeserializerConfig struct {
    Registry Registry
}
```

<a name="JSONSerializer"></a>

## type [JSONSerializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/json.go#L9-L11>)

JSONSerializer is a convenience wrapper for JSON Schema with schema registry

```go
type JSONSerializer struct {
    *WrapperSerializer
}
```

<a name="NewJSONSerializer"></a>

### func [NewJSONSerializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/json.go#L21>)

```go
func NewJSONSerializer(config JSONSerializerConfig) (*JSONSerializer, error)
```

NewJSONSerializer creates a JSON serializer with schema registry support

<a name="JSONSerializerConfig"></a>

## type [JSONSerializerConfig](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/json.go#L14-L18>)

JSONSerializerConfig holds configuration for JSON serializer

```go
type JSONSerializerConfig struct {
    Registry Registry
    Subject  string
    Schema   string
}
```

<a name="Logger"></a>

## type [Logger](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L87-L96>)

Logger is an interface that matches the std/v1/logger.Logger interface. It provides context\-aware structured logging
with optional error and field parameters.

```go
type Logger interface {
    // InfoWithContext logs an informational message with trace context.
    InfoWithContext(ctx context.Context, msg string, err error, fields ...map[string]interface{})

    // WarnWithContext logs a warning message with trace context.
    WarnWithContext(ctx context.Context, msg string, err error, fields ...map[string]interface{})

    // ErrorWithContext logs an error message with trace context.
    ErrorWithContext(ctx context.Context, msg string, err error, fields ...map[string]interface{})
}
```

<a name="Metadata"></a>

## type [Metadata](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L37-L43>)

Metadata contains metadata about a registered schema

```go
type Metadata struct {
    ID      int    `json:"id"`
    Version int    `json:"version"`
    Schema  string `json:"schema"`
    Subject string `json:"subject"`
    Type    string `json:"schemaType,omitempty"`
}
```

<a name="ProtobufDeserializer"></a>

## type [ProtobufDeserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/protobuf.go#L56-L58>)

ProtobufDeserializer is a convenience wrapper for Protobuf with schema registry

```go
type ProtobufDeserializer struct {
    *WrapperDeserializer
}
```

<a name="NewProtobufDeserializer"></a>

### func [NewProtobufDeserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/protobuf.go#L67>)

```go
func NewProtobufDeserializer(config ProtobufDeserializerConfig) (*ProtobufDeserializer, error)
```

NewProtobufDeserializer creates a Protobuf deserializer with schema registry support

<a name="ProtobufDeserializerConfig"></a>

## type [ProtobufDeserializerConfig](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/protobuf.go#L61-L64>)

ProtobufDeserializerConfig holds configuration for Protobuf deserializer

```go
type ProtobufDeserializerConfig struct {
    Registry      Registry
    UnmarshalFunc func([]byte, interface{}) error // Protobuf decoding function
}
```

<a name="ProtobufSerializer"></a>

## type [ProtobufSerializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/protobuf.go#L8-L10>)

ProtobufSerializer is a convenience wrapper for Protobuf with schema registry

```go
type ProtobufSerializer struct {
    *WrapperSerializer
}
```

<a name="NewProtobufSerializer"></a>

### func [NewProtobufSerializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/protobuf.go#L21>)

```go
func NewProtobufSerializer(config ProtobufSerializerConfig) (*ProtobufSerializer, error)
```

NewProtobufSerializer creates a Protobuf serializer with schema registry support

<a name="ProtobufSerializerConfig"></a>

## type [ProtobufSerializerConfig](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/protobuf.go#L13-L18>)

ProtobufSerializerConfig holds configuration for Protobuf serializer

```go
type ProtobufSerializerConfig struct {
    Registry    Registry
    Subject     string
    Schema      string
    MarshalFunc func(interface{}) ([]byte, error) // Protobuf encoding function
}
```

<a name="Registry"></a>

## type [Registry](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/client.go#L22-L34>)

Registry provides an interface for interacting with a Confluent Schema Registry. It handles schema registration,
retrieval, and caching for efficient serialization.

```go
type Registry interface {
    // GetSchemaByID retrieves a schema by its ID
    GetSchemaByID(id int) (string, error)

    // GetLatestSchema retrieves the latest version of a schema for a subject
    GetLatestSchema(subject string) (*Metadata, error)

    // RegisterSchema registers a new schema for a subject
    RegisterSchema(subject, schema, schemaType string) (int, error)

    // CheckCompatibility checks if a schema is compatible with the latest version
    CheckCompatibility(subject, schema, schemaType string) (bool, error)
}
```

<a name="SchemaRegistryLifecycleParams"></a>

## type [SchemaRegistryLifecycleParams](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/fx_module.go#L104-L109>)

SchemaRegistryLifecycleParams groups the dependencies needed for Schema Registry lifecycle management

```go
type SchemaRegistryLifecycleParams struct {
    fx.In

    Lifecycle fx.Lifecycle
    Client    *Client
}
```

<a name="SchemaRegistryParams"></a>

## type [SchemaRegistryParams](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/fx_module.go#L47-L53>)

SchemaRegistryParams groups the dependencies needed to create a Schema Registry client

```go
type SchemaRegistryParams struct {
    fx.In

    Config   Config
    Logger   Logger                 `optional:"true"`
    Observer observability.Observer `optional:"true"`
}
```

<a name="Serializer"></a>

## type [Serializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L8-L10>)

Serializer is the interface for encoding data

```go
type Serializer interface {
    Serialize(data interface{}) ([]byte, error)
}
```

<a name="WrapperDeserializer"></a>

## type [WrapperDeserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L95-L101>)

WrapperDeserializer wraps any deserializer with schema registry support. It automatically retrieves schemas and strips
the Confluent wire format header.

```go
type WrapperDeserializer struct {
    // contains filtered or unexported fields
}
```

<a name="NewWrapperDeserializer"></a>

### func [NewWrapperDeserializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L110>)

```go
func NewWrapperDeserializer(config WrapperDeserializerConfig) (*WrapperDeserializer, error)
```

NewWrapperDeserializer creates a new schema registry\-aware deserializer

<a name="WrapperDeserializer.Deserialize"></a>

### func \(\*WrapperDeserializer\) [Deserialize](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L122>)

```go
func (d *WrapperDeserializer) Deserialize(data []byte, target interface{}) error
```

Deserialize strips the schema registry header and decodes data

<a name="WrapperDeserializerConfig"></a>

## type [WrapperDeserializerConfig](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L104-L107>)

WrapperDeserializerConfig holds configuration for schema registry deserializer

```go
type WrapperDeserializerConfig struct {
    Registry          Registry
    InnerDeserializer Deserializer // Optional: for decoding data after schema registry unwrapping
}
```

<a name="WrapperSerializer"></a>

## type [WrapperSerializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L19-L28>)

WrapperSerializer wraps any serializer with schema registry support. It automatically registers schemas and prepends the
Confluent wire format header.

```go
type WrapperSerializer struct {
    // contains filtered or unexported fields
}
```

<a name="NewWrapperSerializer"></a>

### func [NewWrapperSerializer](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L40>)

```go
func NewWrapperSerializer(config WrapperSerializerConfig) (*WrapperSerializer, error)
```

NewWrapperSerializer creates a new schema registry\-aware serializer

<a name="WrapperSerializer.Serialize"></a>

### func \(\*WrapperSerializer\) [Serialize](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L64>)

```go
func (s *WrapperSerializer) Serialize(data interface{}) ([]byte, error)
```

Serialize encodes data and prepends the schema registry header

<a name="WrapperSerializerConfig"></a>

## type [WrapperSerializerConfig](<https://github.com/aalemi-dev/stdlib-lab/blob/main/schema_registry/serializer.go#L31-L37>)

WrapperSerializerConfig holds configuration for schema registry serializer

```go
type WrapperSerializerConfig struct {
    Registry        Registry
    Subject         string
    SchemaType      string // "AVRO", "PROTOBUF", "JSON"
    Schema          string
    InnerSerializer Serializer // Optional: for encoding data before schema registry wrapping
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
